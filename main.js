(()=>{"use strict";function e(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var t=function(){function t(e,n,r,o,i,a){var s=a.templateSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),this._name=e.name,this._link=e.link,this._cardId=e._id,this._likes=e.likes,this._userId=n,this._isRemovable=this._userId===e.owner._id,this._handleCardClick=r,this._handleButtonRemove=o,this._handleButtonLike=i.bind(this),this._templateSelector=s}var n,r;return n=t,(r=[{key:"_updateLikes",value:function(){this._isLiked=this._likes.map((function(e){return e._id})).includes(this._userId),this._isLiked?this._buttonLike.classList.add("elements__button-like_active"):this._buttonLike.classList.remove("elements__button-like_active"),this._likeCounter.textContent=this._likes.length}},{key:"_getTemplate",value:function(){return document.querySelector(this._templateSelector).content.firstElementChild.cloneNode(!0)}},{key:"_setEventListeners",value:function(){var e=this;this._buttonLike.addEventListener("click",(function(){return e._handleButtonLike(e._cardId,e._isLiked)})),this._buttonRemove&&this._buttonRemove.addEventListener("click",(function(){return e._handleButtonRemove(e._cardId)})),this._cardImage.addEventListener("click",(function(){return e._handleCardClick(e._name,e._link)}))}},{key:"setLikes",value:function(e){this._likes=e,this._updateLikes()}},{key:"createNewCard",value:function(){return this._newCard=this._getTemplate(),this._cardImage=this._newCard.querySelector(".elements__image"),this._cardImage.src=this._link,this._cardImage.alt=this._name,this._newCard.querySelector(".elements__title").textContent=this._name,this._buttonLike=this._newCard.querySelector(".elements__button-like"),this._likeCounter=this._newCard.querySelector(".elements__like-counter"),this._updateLikes(),this._buttonRemove=this._newCard.querySelector(".elements__remove"),this._isRemovable||this._buttonRemove.remove(),this._setEventListeners(),this._newCard}}])&&e(n.prototype,r),Object.defineProperty(n,"prototype",{writable:!1}),t}();function n(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var r=function(){function e(t,n){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._settingsForm=t,this._form=n,this._buttonElement=n.querySelector(t.submitButtonSelector),this._inputList=Array.from(n.querySelectorAll(t.inputSelector))}var t,r;return t=e,(r=[{key:"_handleFormSubmit",value:function(e){e.preventDefault()}},{key:"_toggleButtonState",value:function(){this._form.checkValidity()?(this._buttonElement.classList.remove(this._settingsForm.inactiveButtonClass),this._buttonElement.removeAttribute("disabled")):(this._buttonElement.classList.add(this._settingsForm.inactiveButtonClass),this._buttonElement.setAttribute("disabled",!0))}},{key:"_showInputError",value:function(e){this._errorElement=this._form.querySelector(".".concat(e.id,"-error")),e.classList.add(this._settingsForm.inputErrorClass),this._errorElement.textContent=e.validationMessage,this._errorElement.classList.add(this._settingsForm.errorClass)}},{key:"_hideInputError",value:function(e){this._errorElement=this._form.querySelector(".".concat(e.id,"-error")),e.classList.remove(this._settingsForm.inputErrorClass),this._errorElement.classList.remove(this._settingsForm.errorClass),this._errorElement.textContent=""}},{key:"_checkInputValidity",value:function(e){e.validity.valid?this._hideInputError(e):this._showInputError(e)}},{key:"_setEventListeners",value:function(){var e=this;this._inputList.forEach((function(t){t.addEventListener("input",(function(){e._checkInputValidity(t),e._toggleButtonState()}))})),this._form.addEventListener("submit",(function(t){return e._handleFormSubmit(t)}))}},{key:"enableValidation",value:function(){this._setEventListeners()}},{key:"resetValidation",value:function(){var e=this;this._toggleButtonState(),this._inputList.forEach((function(t){return e._hideInputError(t)}))}}])&&n(t.prototype,r),Object.defineProperty(t,"prototype",{writable:!1}),e}();function o(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var i=function(){function e(t,n){var r=t.items,o=t.renderer;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._itemsArray=r,this._renderer=o,this._container=document.querySelector(n)}var t,n;return t=e,(n=[{key:"addItem",value:function(e){this._container.prepend(e)}},{key:"renderItems",value:function(){var e=this;this._itemsArray.forEach((function(t){return e._renderer(t)}))}},{key:"updateSection",value:function(e){this._itemsArray=e,Array.from(this._container.children).forEach((function(e){return e.remove()})),this.renderItems()}}])&&o(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function a(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var s=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._popup=document.querySelector(t),this._buttonClose=this._popup.querySelector(".popup__close"),this._handleEscClose=this._handleEscClose.bind(this),this._handleOverlayClose=this._handleOverlayClose.bind(this)}var t,n;return t=e,(n=[{key:"_handleEscClose",value:function(e){"Escape"===e.key&&(e.preventDefault(),this.close())}},{key:"_handleOverlayClose",value:function(e){e.target.classList.contains("popup")&&this.close()}},{key:"setEventListeners",value:function(){var e=this;this._buttonClose.addEventListener("click",(function(){e.close()}))}},{key:"open",value:function(){document.addEventListener("keydown",this._handleEscClose),this._popup.addEventListener("mousedown",this._handleOverlayClose),this._popup.classList.add("popup_opened")}},{key:"close",value:function(){document.removeEventListener("keydown",this._handleEscClose),this._popup.removeEventListener("mousedown",this._handleOverlayClose),this._popup.classList.remove("popup_opened")}}])&&a(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function u(e){return u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},u(e)}function c(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function l(){return l="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=f(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},l.apply(this,arguments)}function f(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=d(e)););return e}function p(e,t){return p=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},p(e,t)}function h(e,t){if(t&&("object"===u(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function d(e){return d=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},d(e)}var y=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&p(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=d(r);if(o){var n=d(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return h(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._handlerFormSubmit=t,n._form=n._popup.querySelector(".popup__form"),n._inputList=n._form.querySelectorAll(".popup__input"),n._buttonSubmit=n._popup.querySelector(".popup__save"),n.inputValuesObj={},n}return t=a,(n=[{key:"showLoading",value:function(e){this._buttonSubmit.textContent=e}},{key:"_getInputValues",value:function(){var e=this;this._inputList.forEach((function(t){e.inputValuesObj[t.name]=t.value}))}},{key:"setInputValues",value:function(e){this._inputList.forEach((function(t){t.value=e[t.name]}))}},{key:"setEventListeners",value:function(){var e=this;l(d(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){e._getInputValues(),e._handlerFormSubmit(t)}))}},{key:"close",value:function(){l(d(a.prototype),"close",this).call(this),this._form.reset()}}])&&c(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function _(e){return _="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},_(e)}function v(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function m(){return m="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=b(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},m.apply(this,arguments)}function b(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=g(e)););return e}function k(e,t){return k=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},k(e,t)}function w(e,t){if(t&&("object"===_(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function g(e){return g=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},g(e)}var E=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&k(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=g(r);if(o){var n=g(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return w(this,e)});function a(e){var t;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(t=i.call(this,e))._showCardImage=t._popup.querySelector(".popup__image"),t._showCardCaption=t._popup.querySelector(".popup__caption"),t}return t=a,(n=[{key:"open",value:function(e,t){this._showCardImage.src=t,this._showCardImage.alt=e,this._showCardCaption.textContent=e,m(g(a.prototype),"open",this).call(this)}}])&&v(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function S(e){return S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},S(e)}function C(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function L(){return L="undefined"!=typeof Reflect&&Reflect.get?Reflect.get:function(e,t,n){var r=O(e,t);if(r){var o=Object.getOwnPropertyDescriptor(r,t);return o.get?o.get.call(arguments.length<3?e:n):o.value}},L.apply(this,arguments)}function O(e,t){for(;!Object.prototype.hasOwnProperty.call(e,t)&&null!==(e=I(e)););return e}function j(e,t){return j=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},j(e,t)}function P(e,t){if(t&&("object"===S(t)||"function"==typeof t))return t;if(void 0!==t)throw new TypeError("Derived constructors may only return object or undefined");return function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e)}function I(e){return I=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)},I(e)}var R=function(e){!function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),Object.defineProperty(e,"prototype",{writable:!1}),t&&j(e,t)}(a,e);var t,n,r,o,i=(r=a,o=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Boolean.prototype.valueOf.call(Reflect.construct(Boolean,[],(function(){}))),!0}catch(e){return!1}}(),function(){var e,t=I(r);if(o){var n=I(this).constructor;e=Reflect.construct(t,arguments,n)}else e=t.apply(this,arguments);return P(this,e)});function a(e,t){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,a),(n=i.call(this,e))._handlerFormSubmit=t,n._form=n._popup.querySelector(".popup__form"),n._buttonSubmit=n._popup.querySelector(".popup__save"),n}return t=a,(n=[{key:"open",value:function(e){this._dataToSend=e,L(I(a.prototype),"open",this).call(this)}},{key:"getDataToSend",value:function(){return this._dataToSend}},{key:"setEventListeners",value:function(){var e=this;L(I(a.prototype),"setEventListeners",this).call(this),this._form.addEventListener("submit",(function(t){return e._handlerFormSubmit(t)}))}}])&&C(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),a}(s);function A(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var U=function(){function e(t){var n=t.userNameSelector,r=t.userJobSelector,o=t.userAvatarSelector;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._userName=document.querySelector(n),this._userJob=document.querySelector(r),this._userAvatar=document.querySelector(o)}var t,n;return t=e,(n=[{key:"setUserInfo",value:function(e){var t=e.profileName,n=e.profileJob;this._userName.textContent=t,this._userJob.textContent=n}},{key:"getUserInfo",value:function(){return{profileName:this._userName.textContent,profileJob:this._userJob.textContent}}},{key:"setUserAvatar",value:function(e){this._userAvatar.src=e}},{key:"setUserId",value:function(e){this._userId=e}},{key:"getUserId",value:function(){return this._userId}}])&&A(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}();function T(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}var q=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._baseUrl=t.baseUrl,this._headers=t.headers}var t,n;return t=e,(n=[{key:"_checkResponse",value:function(e){return e.ok?e.json():Promise.reject("Ошибка: ".concat(e.status))}},{key:"getUserInfo",value:function(){return fetch("".concat(this._baseUrl,"/users/me"),{headers:this._headers}).then(this._checkResponse)}},{key:"patchUserInfo",value:function(e){var t=e.profileName,n=e.profileJob;return fetch("".concat(this._baseUrl,"/users/me"),{method:"PATCH",headers:this._headers,body:JSON.stringify({name:t,about:n})}).then(this._checkResponse)}},{key:"patchUserAvatar",value:function(e){var t=e.avatarLink;return fetch("".concat(this._baseUrl,"/users/me/avatar"),{method:"PATCH",headers:this._headers,body:JSON.stringify({avatar:t})}).then(this._checkResponse)}},{key:"getInitialCards",value:function(){return fetch("".concat(this._baseUrl,"/cards"),{headers:this._headers}).then(this._checkResponse)}},{key:"postNewCard",value:function(e){var t=e.cardName,n=e.cardLink;return fetch("".concat(this._baseUrl,"/cards"),{method:"POST",headers:this._headers,body:JSON.stringify({name:t,link:n})}).then(this._checkResponse)}},{key:"deleteCard",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}},{key:"addLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"PUT",headers:this._headers}).then(this._checkResponse)}},{key:"deleteLike",value:function(e){return fetch("".concat(this._baseUrl,"/cards/").concat(e,"/likes"),{method:"DELETE",headers:this._headers}).then(this._checkResponse)}}])&&T(t.prototype,n),Object.defineProperty(t,"prototype",{writable:!1}),e}(),B={inputSelector:".popup__input",submitButtonSelector:".popup__save",inactiveButtonClass:"popup__save_inactive",inputErrorClass:"popup__input_status_error",errorClass:"popup__input-error_active"},N={userNameSelector:".profile__name",userJobSelector:".profile__description",userAvatarSelector:".profile__avatar",cardListSelector:".elements__list",templateSelector:".template-elements",popupEditProfile:".popup_type_edit-profile",popupUpdateAvatar:".popup_type_update-avatar",popupAddCard:".popup_type_add-card",popupShowCard:".popup_type_show-card",popupConfirm:".popup_type_confirm"},V={editProfileButton:document.querySelector(".profile__edit-button"),addCardButton:document.querySelector(".profile__add-button"),editAvatarButton:document.querySelector(".profile__avatar-button")},x=Array.from(document.forms);function D(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var F={},J=new q({baseUrl:"https://mesto.nomoreparties.co/v1/cohort-41",headers:{authorization:"b1568769-e5c9-45d8-96dd-c3a661412496","Content-Type":"application/json"}}),H=new y(N.popupEditProfile,(function(e){e.preventDefault(),H.showLoading("Сохранение..."),J.patchUserInfo(this.inputValuesObj).then(Q).catch((function(e){return alert(e)})).finally((function(){H.close(),H.showLoading("Сохранить")}))}));H.setEventListeners();var M=new y(N.popupAddCard,(function(e){e.preventDefault(),M.showLoading("Создание..."),J.postNewCard(this.inputValuesObj).then((function(){return J.getInitialCards()})).then((function(e){return F.updateSection(e.reverse())})).catch((function(e){return alert(e)})).finally((function(){M.close(),M.showLoading("Создать")}))}));M.setEventListeners();var z=new y(N.popupUpdateAvatar,(function(e){e.preventDefault(),z.showLoading("Сохранение..."),J.patchUserAvatar(this.inputValuesObj).then((function(e){return K.setUserAvatar(e.avatar)})).catch((function(e){return alert(e)})).finally((function(){z.close(),z.showLoading("Сохранить")}))}));z.setEventListeners();var $=new E(N.popupShowCard);$.setEventListeners();var G=new R(N.popupConfirm,(function(e){e.preventDefault(),G.showLoading("Удаление..."),J.deleteCard(G.getDataToSend()).then((function(){return J.getInitialCards()})).then((function(e){return F.updateSection(e.reverse())})).catch((function(e){return alert(e)})).finally((function(){G.close(),G.showLoading("Да")}))}));G.setEventListeners(),G.showLoading=H.showLoading;var K=new U(N);function Q(e){K.setUserInfo({profileName:e.name,profileJob:e.about})}function W(e,t){var n=this;(t?J.deleteLike(e):J.addLike(e)).then((function(e){return n.setLikes(e.likes)})).catch((function(e){return alert(e)}))}Promise.all([J.getUserInfo(),J.getInitialCards()]).then((function(e){var n,o,a=(o=2,function(e){if(Array.isArray(e))return e}(n=e)||function(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,i=[],a=!0,s=!1;try{for(n=n.call(e);!(a=(r=n.next()).done)&&(i.push(r.value),!t||i.length!==t);a=!0);}catch(e){s=!0,o=e}finally{try{a||null==n.return||n.return()}finally{if(s)throw o}}return i}}(n,o)||function(e,t){if(e){if("string"==typeof e)return D(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?D(e,t):void 0}}(n,o)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()),s=a[0],u=a[1];Q(s),K.setUserAvatar(s.avatar),K.setUserId(s._id),function(e){(F=new i({items:e.reverse(),renderer:function(e){var n=new t(e,K.getUserId(),$.open.bind($),G.open.bind(G),W,N);F.addItem(n.createNewCard())}},N.cardListSelector)).renderItems()}(u);var c={};x.forEach((function(e){var t=new r(B,e);t.enableValidation(),c[e.name]=t})),V.editProfileButton.addEventListener("click",(function(){H.setInputValues(K.getUserInfo()),c.formEditProfile.resetValidation(),H.open()})),V.addCardButton.addEventListener("click",(function(){c.formAddCard.resetValidation(),M.open()})),V.editAvatarButton.addEventListener("click",(function(){c.formUpdAvatar.resetValidation(),z.open()}))})).catch((function(e){return alert(e)}))})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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QUFjQyxFQUFjQyxHQUN0RDBKLEVBQWNDLG1CQUNkRixFQUFrQnpKLEVBQUsxQyxNQUFRb00sS0FHakMzQyxFQUFRQyxrQkFBa0IzSCxpQkFBaUIsU0FBUyxXQUNsRHFILEVBQWlCa0QsZUFBZXRCLEVBQVNVLGVBQ3pDUyxFQUFrQkksZ0JBQWdCQyxrQkFDbENwRCxFQUFpQjJDLFVBR25CdEMsRUFBUUUsY0FBYzVILGlCQUFpQixTQUFTLFdBQzlDb0ssRUFBa0JNLFlBQVlELGtCQUM5QmxELEVBQWF5QyxVQUdmdEMsRUFBUUcsaUJBQWlCN0gsaUJBQWlCLFNBQVMsV0FDakRvSyxFQUFrQk8sY0FBY0Ysa0JBQ2hDbkQsRUFBa0IwQyxhQUdyQjFCLE9BQU0sU0FBQUMsR0FBRyxPQUFJQyxNQUFNRCxPIiwic291cmNlcyI6WyJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvQXBpLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL3V0aWxzL2NvbnN0YW50cy5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyJdLCJzb3VyY2VzQ29udGVudCI6WyJleHBvcnQgZGVmYXVsdCBjbGFzcyBDYXJkIHtcbiAgY29uc3RydWN0b3IoZGF0YSwgdXNlcklkLCBoYW5kbGVDYXJkQ2xpY2ssIGhhbmRsZUJ1dHRvblJlbW92ZSwgaGFuZGxlQnV0dG9uTGlrZSwge3RlbXBsYXRlU2VsZWN0b3J9KSB7XG4gICAgdGhpcy5fbmFtZSA9IGRhdGEubmFtZTtcbiAgICB0aGlzLl9saW5rID0gZGF0YS5saW5rO1xuICAgIHRoaXMuX2NhcmRJZCA9IGRhdGEuX2lkO1xuICAgIHRoaXMuX2xpa2VzID0gZGF0YS5saWtlcztcbiAgICB0aGlzLl91c2VySWQgPSB1c2VySWQ7XG4gICAgdGhpcy5faXNSZW1vdmFibGUgPSB0aGlzLl91c2VySWQgPT09IGRhdGEub3duZXIuX2lkO1xuICAgIHRoaXMuX2hhbmRsZUNhcmRDbGljayA9IGhhbmRsZUNhcmRDbGljaztcbiAgICB0aGlzLl9oYW5kbGVCdXR0b25SZW1vdmUgPSBoYW5kbGVCdXR0b25SZW1vdmU7XG4gICAgdGhpcy5faGFuZGxlQnV0dG9uTGlrZSA9IGhhbmRsZUJ1dHRvbkxpa2UuYmluZCh0aGlzKTtcbiAgICB0aGlzLl90ZW1wbGF0ZVNlbGVjdG9yID0gdGVtcGxhdGVTZWxlY3RvcjtcbiAgfVxuXG4gIF91cGRhdGVMaWtlcygpIHtcbiAgICB0aGlzLl9pc0xpa2VkID0gdGhpcy5fbGlrZXMubWFwKHVzZXJzID0+IHVzZXJzLl9pZCkuaW5jbHVkZXModGhpcy5fdXNlcklkKTtcbiAgICBpZiAodGhpcy5faXNMaWtlZClcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LmFkZCgnZWxlbWVudHNfX2J1dHRvbi1saWtlX2FjdGl2ZScpO1xuICAgIGVsc2VcbiAgICAgIHRoaXMuX2J1dHRvbkxpa2UuY2xhc3NMaXN0LnJlbW92ZSgnZWxlbWVudHNfX2J1dHRvbi1saWtlX2FjdGl2ZScpO1xuICAgIHRoaXMuX2xpa2VDb3VudGVyLnRleHRDb250ZW50ID0gdGhpcy5fbGlrZXMubGVuZ3RoO1xuICB9XG5cbiAgX2dldFRlbXBsYXRlKCkge1xuICAgIHJldHVybiAoZG9jdW1lbnRcbiAgICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXG4gICAgICAuY29udGVudFxuICAgICAgLmZpcnN0RWxlbWVudENoaWxkXG4gICAgICAuY2xvbmVOb2RlKHRydWUpKTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9idXR0b25MaWtlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4gdGhpcy5faGFuZGxlQnV0dG9uTGlrZSh0aGlzLl9jYXJkSWQsIHRoaXMuX2lzTGlrZWQpKTtcblxuICAgIGlmICh0aGlzLl9idXR0b25SZW1vdmUpXG4gICAgICB0aGlzLl9idXR0b25SZW1vdmUuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVCdXR0b25SZW1vdmUodGhpcy5fY2FyZElkKSk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB0aGlzLl9oYW5kbGVDYXJkQ2xpY2sodGhpcy5fbmFtZSwgdGhpcy5fbGluaykpO1xuICB9XG5cbiAgc2V0TGlrZXMobGlrZXMpIHtcbiAgICB0aGlzLl9saWtlcyA9IGxpa2VzXG4gICAgdGhpcy5fdXBkYXRlTGlrZXMoKTtcbiAgfVxuXG4gIGNyZWF0ZU5ld0NhcmQoKSB7XG4gICAgdGhpcy5fbmV3Q2FyZCA9IHRoaXMuX2dldFRlbXBsYXRlKCk7XG4gICAgdGhpcy5fY2FyZEltYWdlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2ltYWdlJyk7XG5cbiAgICB0aGlzLl9jYXJkSW1hZ2Uuc3JjID0gdGhpcy5fbGluaztcbiAgICB0aGlzLl9jYXJkSW1hZ2UuYWx0ID0gdGhpcy5fbmFtZTtcbiAgICB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fdGl0bGUnKS50ZXh0Q29udGVudCA9IHRoaXMuX25hbWU7XG5cbiAgICB0aGlzLl9idXR0b25MaWtlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuZWxlbWVudHNfX2J1dHRvbi1saWtlJyk7XG4gICAgdGhpcy5fbGlrZUNvdW50ZXIgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5lbGVtZW50c19fbGlrZS1jb3VudGVyJyk7XG4gICAgdGhpcy5fdXBkYXRlTGlrZXMoKTtcblxuICAgIHRoaXMuX2J1dHRvblJlbW92ZSA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmVsZW1lbnRzX19yZW1vdmUnKTtcbiAgICBpZiAoIXRoaXMuX2lzUmVtb3ZhYmxlKVxuICAgICAgdGhpcy5fYnV0dG9uUmVtb3ZlLnJlbW92ZSgpO1xuXG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuICAgIHJldHVybiB0aGlzLl9uZXdDYXJkO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBGb3JtVmFsaWRhdG9yIHtcbiAgY29uc3RydWN0b3Ioc2V0dGluZ3NGb3JtLCBmb3JtKSB7XG4gICAgdGhpcy5fc2V0dGluZ3NGb3JtID0gc2V0dGluZ3NGb3JtO1xuICAgIHRoaXMuX2Zvcm0gPSBmb3JtO1xuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSBmb3JtLnF1ZXJ5U2VsZWN0b3Ioc2V0dGluZ3NGb3JtLnN1Ym1pdEJ1dHRvblNlbGVjdG9yKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSBBcnJheS5mcm9tKGZvcm0ucXVlcnlTZWxlY3RvckFsbChzZXR0aW5nc0Zvcm0uaW5wdXRTZWxlY3RvcikpO1xuICB9XG5cbiAgX2hhbmRsZUZvcm1TdWJtaXQoZXZ0KSB7XG4gICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gIH1cblxuICBfdG9nZ2xlQnV0dG9uU3RhdGUoKSB7XG4gICAgaWYgKCF0aGlzLl9mb3JtLmNoZWNrVmFsaWRpdHkoKSkge1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzRm9ybS5pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuc2V0QXR0cmlidXRlKCdkaXNhYmxlZCcsIHRydWUpO1xuICAgIH0gZWxzZSB7XG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3NGb3JtLmluYWN0aXZlQnV0dG9uQ2xhc3MpO1xuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5yZW1vdmVBdHRyaWJ1dGUoJ2Rpc2FibGVkJyk7XG4gICAgfVxuICB9XG5cbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudCA9IHRoaXMuX2Zvcm0ucXVlcnlTZWxlY3RvcihgLiR7aW5wdXRFbGVtZW50LmlkfS1lcnJvcmApO1xuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QuYWRkKHRoaXMuX3NldHRpbmdzRm9ybS5pbnB1dEVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9IGlucHV0RWxlbWVudC52YWxpZGF0aW9uTWVzc2FnZTtcbiAgICB0aGlzLl9lcnJvckVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9zZXR0aW5nc0Zvcm0uZXJyb3JDbGFzcyk7XG4gIH1cblxuICBfaGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KSB7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XG4gICAgaW5wdXRFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3NGb3JtLmlucHV0RXJyb3JDbGFzcyk7XG4gICAgdGhpcy5fZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fc2V0dGluZ3NGb3JtLmVycm9yQ2xhc3MpO1xuICAgIHRoaXMuX2Vycm9yRWxlbWVudC50ZXh0Q29udGVudCA9ICcnO1xuICB9XG5cbiAgX2NoZWNrSW5wdXRWYWxpZGl0eShpbnB1dEVsZW1lbnQpIHtcbiAgICBpZiAoIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZClcbiAgICAgIHRoaXMuX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCk7XG4gICAgZWxzZVxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcbiAgfVxuXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpbnB1dEVsZW1lbnQgPT4ge1xuICAgICAgaW5wdXRFbGVtZW50LmFkZEV2ZW50TGlzdGVuZXIoJ2lucHV0JywgKCkgPT4ge1xuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcbiAgICAgICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcbiAgICAgIH0pO1xuICAgIH0pO1xuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcignc3VibWl0JywgKGV2dCkgPT4gdGhpcy5faGFuZGxlRm9ybVN1Ym1pdChldnQpKTtcbiAgfVxuXG4gIGVuYWJsZVZhbGlkYXRpb24oKSB7XG4gICAgdGhpcy5fc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgfVxuXG4gIHJlc2V0VmFsaWRhdGlvbigpIHtcbiAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKGlucHV0RWxlbWVudCA9PiB0aGlzLl9oaWRlSW5wdXRFcnJvcihpbnB1dEVsZW1lbnQpKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XG4gIGNvbnN0cnVjdG9yKHtpdGVtcywgcmVuZGVyZXJ9LCBjb250YWluZXJTZWxlY3Rvcikge1xuICAgIHRoaXMuX2l0ZW1zQXJyYXkgPSBpdGVtcztcbiAgICB0aGlzLl9yZW5kZXJlciA9IHJlbmRlcmVyO1xuICAgIHRoaXMuX2NvbnRhaW5lciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoY29udGFpbmVyU2VsZWN0b3IpO1xuICB9XG5cbiAgYWRkSXRlbShlbGVtZW50KSB7XG4gICAgdGhpcy5fY29udGFpbmVyLnByZXBlbmQoZWxlbWVudCk7XG4gIH1cblxuICByZW5kZXJJdGVtcygpIHtcbiAgICB0aGlzLl9pdGVtc0FycmF5LmZvckVhY2goaXRlbSA9PiB0aGlzLl9yZW5kZXJlcihpdGVtKSk7XG4gIH1cblxuICB1cGRhdGVTZWN0aW9uKGNhcmRzKSB7XG4gICAgdGhpcy5faXRlbXNBcnJheSA9IGNhcmRzO1xuICAgIEFycmF5LmZyb20odGhpcy5fY29udGFpbmVyLmNoaWxkcmVuKS5mb3JFYWNoKGl0ZW0gPT4gaXRlbS5yZW1vdmUoKSk7XG4gICAgdGhpcy5yZW5kZXJJdGVtcygpO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cCB7XG4gIGNvbnN0cnVjdG9yKHBvcHVwU2VsZWN0b3IpIHtcbiAgICB0aGlzLl9wb3B1cCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IocG9wdXBTZWxlY3Rvcik7XG4gICAgdGhpcy5fYnV0dG9uQ2xvc2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Nsb3NlJyk7XG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xuICAgIHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZSA9IHRoaXMuX2hhbmRsZU92ZXJsYXlDbG9zZS5iaW5kKHRoaXMpO1xuICB9XG5cbiAgX2hhbmRsZUVzY0Nsb3NlKGV2dCkge1xuICAgIGlmIChldnQua2V5ID09PSAnRXNjYXBlJykge1xuICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XG4gICAgICB0aGlzLmNsb3NlKCk7XG4gICAgfVxuICB9XG5cbiAgX2hhbmRsZU92ZXJsYXlDbG9zZShldnQpIHtcbiAgICBpZiAoZXZ0LnRhcmdldC5jbGFzc0xpc3QuY29udGFpbnMoJ3BvcHVwJykpXG4gICAgICB0aGlzLmNsb3NlKCk7XG4gIH1cblxuICBzZXRFdmVudExpc3RlbmVycygpIHtcbiAgICB0aGlzLl9idXR0b25DbG9zZS5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcbiAgICAgIHRoaXMuY2xvc2UoKTtcbiAgICB9KTtcbiAgfVxuXG4gIG9wZW4oKSB7XG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgZG9jdW1lbnQucmVtb3ZlRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcbiAgICB0aGlzLl9wb3B1cC5yZW1vdmVFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCB0aGlzLl9oYW5kbGVPdmVybGF5Q2xvc2UpO1xuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5yZW1vdmUoJ3BvcHVwX29wZW5lZCcpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3RvciwgaGFuZGxlckZvcm1TdWJtaXQpIHtcbiAgICBzdXBlcihwb3B1cFNlbGVjdG9yKTtcbiAgICB0aGlzLl9oYW5kbGVyRm9ybVN1Ym1pdCA9IGhhbmRsZXJGb3JtU3VibWl0O1xuICAgIHRoaXMuX2Zvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2Zvcm0nKTtcbiAgICB0aGlzLl9pbnB1dExpc3QgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3JBbGwoJy5wb3B1cF9faW5wdXQnKTtcbiAgICB0aGlzLl9idXR0b25TdWJtaXQgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX3NhdmUnKTtcbiAgICB0aGlzLmlucHV0VmFsdWVzT2JqID0ge307XG4gIH1cblxuICBzaG93TG9hZGluZyh0ZXh0KSB7XG4gICAgdGhpcy5fYnV0dG9uU3VibWl0LnRleHRDb250ZW50ID0gdGV4dDtcbiAgfVxuXG4gIF9nZXRJbnB1dFZhbHVlcygpIHtcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaChpdGVtID0+IHtcbiAgICAgIHRoaXMuaW5wdXRWYWx1ZXNPYmpbaXRlbS5uYW1lXSA9IGl0ZW0udmFsdWU7XG4gICAgfSlcbiAgfVxuXG4gIHNldElucHV0VmFsdWVzKGlucHV0VmFsdWVzKSB7XG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goaXRlbSA9PiB7XG4gICAgICBpdGVtLnZhbHVlID0gaW5wdXRWYWx1ZXNbaXRlbS5uYW1lXTtcbiAgICB9KVxuICB9XG5cbiAgc2V0RXZlbnRMaXN0ZW5lcnMoKSB7XG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcbiAgICB0aGlzLl9mb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldnQpID0+IHtcbiAgICAgIHRoaXMuX2dldElucHV0VmFsdWVzKCk7XG4gICAgICB0aGlzLl9oYW5kbGVyRm9ybVN1Ym1pdChldnQpO1xuICAgIH0pO1xuICB9XG5cbiAgY2xvc2UoKSB7XG4gICAgc3VwZXIuY2xvc2UoKTtcbiAgICB0aGlzLl9mb3JtLnJlc2V0KCk7XG4gIH1cbn1cbiIsImltcG9ydCBQb3B1cCBmcm9tIFwiLi9Qb3B1cC5qc1wiO1xuXG5leHBvcnQgZGVmYXVsdCBjbGFzcyBQb3B1cFdpdGhJbWFnZSBleHRlbmRzIFBvcHVwIHtcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX3Nob3dDYXJkSW1hZ2UgPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XG4gICAgdGhpcy5fc2hvd0NhcmRDYXB0aW9uID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uJyk7XG4gIH1cblxuICBvcGVuKG5hbWUsIGxpbmspIHtcbiAgICB0aGlzLl9zaG93Q2FyZEltYWdlLnNyYyA9IGxpbms7XG4gICAgdGhpcy5fc2hvd0NhcmRJbWFnZS5hbHQgPSBuYW1lO1xuICAgIHRoaXMuX3Nob3dDYXJkQ2FwdGlvbi50ZXh0Q29udGVudCA9IG5hbWU7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG59XG4iLCJpbXBvcnQgUG9wdXAgZnJvbSBcIi4vUG9wdXAuanNcIjtcblxuZXhwb3J0IGRlZmF1bHQgY2xhc3MgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGV4dGVuZHMgUG9wdXAge1xuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBoYW5kbGVyRm9ybVN1Ym1pdCkge1xuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xuICAgIHRoaXMuX2hhbmRsZXJGb3JtU3VibWl0ID0gaGFuZGxlckZvcm1TdWJtaXQ7XG4gICAgdGhpcy5fZm9ybSA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fZm9ybScpO1xuICAgIHRoaXMuX2J1dHRvblN1Ym1pdCA9IHRoaXMuX3BvcHVwLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fc2F2ZScpO1xuICB9XG5cbiAgb3BlbihkYXRhVG9TZW5kKSB7XG4gICAgdGhpcy5fZGF0YVRvU2VuZCA9IGRhdGFUb1NlbmQ7XG4gICAgc3VwZXIub3BlbigpO1xuICB9XG5cbiAgZ2V0RGF0YVRvU2VuZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fZGF0YVRvU2VuZDtcbiAgfVxuXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xuICAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XG4gICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCAoZXZ0KSA9PiB0aGlzLl9oYW5kbGVyRm9ybVN1Ym1pdChldnQpKTtcbiAgfVxufVxuIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgVXNlckluZm8ge1xuICBjb25zdHJ1Y3Rvcih7dXNlck5hbWVTZWxlY3RvciwgdXNlckpvYlNlbGVjdG9yLCB1c2VyQXZhdGFyU2VsZWN0b3J9KSB7XG4gICAgdGhpcy5fdXNlck5hbWUgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJOYW1lU2VsZWN0b3IpO1xuICAgIHRoaXMuX3VzZXJKb2IgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKHVzZXJKb2JTZWxlY3Rvcik7XG4gICAgdGhpcy5fdXNlckF2YXRhciA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IodXNlckF2YXRhclNlbGVjdG9yKTtcbiAgfVxuXG4gIHNldFVzZXJJbmZvKHtwcm9maWxlTmFtZSwgcHJvZmlsZUpvYn0pIHtcbiAgICB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCA9IHByb2ZpbGVOYW1lO1xuICAgIHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnQgPSBwcm9maWxlSm9iO1xuICB9XG5cbiAgZ2V0VXNlckluZm8oKSB7XG4gICAgcmV0dXJuIHtcbiAgICAgIHByb2ZpbGVOYW1lOiB0aGlzLl91c2VyTmFtZS50ZXh0Q29udGVudCxcbiAgICAgIHByb2ZpbGVKb2I6IHRoaXMuX3VzZXJKb2IudGV4dENvbnRlbnRcbiAgICB9XG4gIH1cblxuICBzZXRVc2VyQXZhdGFyKGxpbmspIHtcbiAgICB0aGlzLl91c2VyQXZhdGFyLnNyYyA9IGxpbms7XG4gIH1cblxuICBzZXRVc2VySWQoaWQpIHtcbiAgICB0aGlzLl91c2VySWQgPSBpZDtcbiAgfVxuXG4gIGdldFVzZXJJZCgpIHtcbiAgICByZXR1cm4gdGhpcy5fdXNlcklkO1xuICB9XG59XG4iLCJleHBvcnQgZGVmYXVsdCBjbGFzcyBBcGkge1xuICBjb25zdHJ1Y3Rvcihjb25maWcpIHtcbiAgICB0aGlzLl9iYXNlVXJsID0gY29uZmlnLmJhc2VVcmw7XG4gICAgdGhpcy5faGVhZGVycyA9IGNvbmZpZy5oZWFkZXJzO1xuICB9XG5cbiAgX2NoZWNrUmVzcG9uc2UocmVzKSB7XG4gICAgaWYgKHJlcy5vaylcbiAgICAgIHJldHVybiByZXMuanNvbigpO1xuICAgIGVsc2VcbiAgICAgIHJldHVybiBQcm9taXNlLnJlamVjdChg0J7RiNC40LHQutCwOiAke3Jlcy5zdGF0dXN9YCk7XG4gIH1cblxuICBnZXRVc2VySW5mbygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWVgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgcGF0Y2hVc2VySW5mbyh7cHJvZmlsZU5hbWUsIHByb2ZpbGVKb2J9KSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L3VzZXJzL21lYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgbmFtZTogcHJvZmlsZU5hbWUsXG4gICAgICAgIGFib3V0OiBwcm9maWxlSm9iXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIHBhdGNoVXNlckF2YXRhcih7YXZhdGFyTGlua30pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vdXNlcnMvbWUvYXZhdGFyYCwge1xuICAgICAgbWV0aG9kOiAnUEFUQ0gnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVycyxcbiAgICAgIGJvZHk6IEpTT04uc3RyaW5naWZ5KHtcbiAgICAgICAgYXZhdGFyOiBhdmF0YXJMaW5rXG4gICAgICB9KVxuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGdldEluaXRpYWxDYXJkcygpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgcG9zdE5ld0NhcmQoe2NhcmROYW1lLCBjYXJkTGlua30pIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHNgLCB7XG4gICAgICBtZXRob2Q6ICdQT1NUJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnMsXG4gICAgICBib2R5OiBKU09OLnN0cmluZ2lmeSh7XG4gICAgICAgIG5hbWU6IGNhcmROYW1lLFxuICAgICAgICBsaW5rOiBjYXJkTGlua1xuICAgICAgfSlcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cblxuICBkZWxldGVDYXJkKGNhcmRJZCkge1xuICAgIHJldHVybiBmZXRjaChgJHt0aGlzLl9iYXNlVXJsfS9jYXJkcy8ke2NhcmRJZH1gLCB7XG4gICAgICBtZXRob2Q6ICdERUxFVEUnLFxuICAgICAgaGVhZGVyczogdGhpcy5faGVhZGVyc1xuICAgIH0pXG4gICAgICAudGhlbih0aGlzLl9jaGVja1Jlc3BvbnNlKTtcbiAgfVxuXG4gIGFkZExpa2UoY2FyZElkKSB7XG4gICAgcmV0dXJuIGZldGNoKGAke3RoaXMuX2Jhc2VVcmx9L2NhcmRzLyR7Y2FyZElkfS9saWtlc2AsIHtcbiAgICAgIG1ldGhvZDogJ1BVVCcsXG4gICAgICBoZWFkZXJzOiB0aGlzLl9oZWFkZXJzXG4gICAgfSlcbiAgICAgIC50aGVuKHRoaXMuX2NoZWNrUmVzcG9uc2UpO1xuICB9XG5cbiAgZGVsZXRlTGlrZShjYXJkSWQpIHtcbiAgICByZXR1cm4gZmV0Y2goYCR7dGhpcy5fYmFzZVVybH0vY2FyZHMvJHtjYXJkSWR9L2xpa2VzYCwge1xuICAgICAgbWV0aG9kOiAnREVMRVRFJyxcbiAgICAgIGhlYWRlcnM6IHRoaXMuX2hlYWRlcnNcbiAgICB9KVxuICAgICAgLnRoZW4odGhpcy5fY2hlY2tSZXNwb25zZSk7XG4gIH1cbn1cbiIsImV4cG9ydCBjb25zdCBzZXR0aW5nc0Zvcm0gPSB7XG4gIGlucHV0U2VsZWN0b3I6ICcucG9wdXBfX2lucHV0JyxcbiAgc3VibWl0QnV0dG9uU2VsZWN0b3I6ICcucG9wdXBfX3NhdmUnLFxuICBpbmFjdGl2ZUJ1dHRvbkNsYXNzOiAncG9wdXBfX3NhdmVfaW5hY3RpdmUnLFxuICBpbnB1dEVycm9yQ2xhc3M6ICdwb3B1cF9faW5wdXRfc3RhdHVzX2Vycm9yJyxcbiAgZXJyb3JDbGFzczogJ3BvcHVwX19pbnB1dC1lcnJvcl9hY3RpdmUnXG59XG5cbmV4cG9ydCBjb25zdCBzZWxlY3RvcnMgPSB7XG4gIHVzZXJOYW1lU2VsZWN0b3I6ICcucHJvZmlsZV9fbmFtZScsXG4gIHVzZXJKb2JTZWxlY3RvcjogJy5wcm9maWxlX19kZXNjcmlwdGlvbicsXG4gIHVzZXJBdmF0YXJTZWxlY3RvcjogJy5wcm9maWxlX19hdmF0YXInLFxuICBjYXJkTGlzdFNlbGVjdG9yOiAnLmVsZW1lbnRzX19saXN0JyxcbiAgdGVtcGxhdGVTZWxlY3RvcjogJy50ZW1wbGF0ZS1lbGVtZW50cycsXG4gIHBvcHVwRWRpdFByb2ZpbGU6ICcucG9wdXBfdHlwZV9lZGl0LXByb2ZpbGUnLFxuICBwb3B1cFVwZGF0ZUF2YXRhcjogJy5wb3B1cF90eXBlX3VwZGF0ZS1hdmF0YXInLFxuICBwb3B1cEFkZENhcmQ6ICcucG9wdXBfdHlwZV9hZGQtY2FyZCcsXG4gIHBvcHVwU2hvd0NhcmQ6ICcucG9wdXBfdHlwZV9zaG93LWNhcmQnLFxuICBwb3B1cENvbmZpcm06ICcucG9wdXBfdHlwZV9jb25maXJtJ1xufVxuXG5leHBvcnQgY29uc3QgYnV0dG9ucyA9IHtcbiAgZWRpdFByb2ZpbGVCdXR0b246IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJy5wcm9maWxlX19lZGl0LWJ1dHRvbicpLFxuICBhZGRDYXJkQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYWRkLWJ1dHRvbicpLFxuICBlZGl0QXZhdGFyQnV0dG9uOiBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fYXZhdGFyLWJ1dHRvbicpXG59XG5cbmV4cG9ydCBjb25zdCBmb3JtTGlzdCA9IEFycmF5LmZyb20oZG9jdW1lbnQuZm9ybXMpO1xuIiwiaW1wb3J0ICcuL2luZGV4LmNzcyc7XG5pbXBvcnQgQ2FyZCBmcm9tICcuLi9jb21wb25lbnRzL0NhcmQuanMnO1xuaW1wb3J0IEZvcm1WYWxpZGF0b3IgZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xuaW1wb3J0IFNlY3Rpb24gZnJvbSBcIi4uL2NvbXBvbmVudHMvU2VjdGlvbi5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEZvcm0gZnJvbSBcIi4uL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qc1wiO1xuaW1wb3J0IFBvcHVwV2l0aEltYWdlIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aEltYWdlLmpzXCI7XG5pbXBvcnQgUG9wdXBXaXRoQ29uZmlybWF0aW9uIGZyb20gXCIuLi9jb21wb25lbnRzL1BvcHVwV2l0aENvbmZpcm1hdGlvbi5qc1wiO1xuaW1wb3J0IFVzZXJJbmZvIGZyb20gXCIuLi9jb21wb25lbnRzL1VzZXJJbmZvLmpzXCI7XG5pbXBvcnQgQXBpIGZyb20gXCIuLi9jb21wb25lbnRzL0FwaS5qc1wiO1xuaW1wb3J0IHtcbiAgc2V0dGluZ3NGb3JtLFxuICBzZWxlY3RvcnMsXG4gIGJ1dHRvbnMsXG4gIGZvcm1MaXN0XG59IGZyb20gJy4uL3V0aWxzL2NvbnN0YW50cy5qcyc7XG5cbmxldCBjYXJkc0xpc3QgPSB7fTtcblxuY29uc3QgYXBpID0gbmV3IEFwaSh7XG4gIGJhc2VVcmw6ICdodHRwczovL21lc3RvLm5vbW9yZXBhcnRpZXMuY28vdjEvY29ob3J0LTQxJyxcbiAgaGVhZGVyczoge1xuICAgIGF1dGhvcml6YXRpb246ICdiMTU2ODc2OS1lNWM5LTQ1ZDgtOTZkZC1jM2E2NjE0MTI0OTYnLFxuICAgICdDb250ZW50LVR5cGUnOiAnYXBwbGljYXRpb24vanNvbidcbiAgfVxufSk7XG5cbmNvbnN0IHBvcHVwRWRpdFByb2ZpbGUgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wdXBFZGl0UHJvZmlsZSwgaGFuZGxlclByb2ZpbGVTdWJtaXQpO1xucG9wdXBFZGl0UHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cEFkZENhcmQgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wdXBBZGRDYXJkLCBoYW5kbGVyQWRkQ2FyZFN1Ym1pdCk7XG5wb3B1cEFkZENhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBVcGRhdGVBdmF0YXIgPSBuZXcgUG9wdXBXaXRoRm9ybShzZWxlY3RvcnMucG9wdXBVcGRhdGVBdmF0YXIsIGhhbmRsZXJBdmF0YXJTdWJtaXQpXG5wb3B1cFVwZGF0ZUF2YXRhci5zZXRFdmVudExpc3RlbmVycygpO1xuXG5jb25zdCBwb3B1cFNob3dDYXJkID0gbmV3IFBvcHVwV2l0aEltYWdlKHNlbGVjdG9ycy5wb3B1cFNob3dDYXJkKTtcbnBvcHVwU2hvd0NhcmQuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcblxuY29uc3QgcG9wdXBDb25maXJtID0gbmV3IFBvcHVwV2l0aENvbmZpcm1hdGlvbihzZWxlY3RvcnMucG9wdXBDb25maXJtLCBoYW5kbGVDb25maXJtU3VibWl0KTtcbnBvcHVwQ29uZmlybS5zZXRFdmVudExpc3RlbmVycygpO1xucG9wdXBDb25maXJtLnNob3dMb2FkaW5nID0gcG9wdXBFZGl0UHJvZmlsZS5zaG93TG9hZGluZztcblxuY29uc3QgdXNlckluZm8gPSBuZXcgVXNlckluZm8oc2VsZWN0b3JzKTtcblxuZnVuY3Rpb24gcmVuZGVyVXNlckluZm8oaW5mbykge1xuICB1c2VySW5mby5zZXRVc2VySW5mbyh7XG4gICAgcHJvZmlsZU5hbWU6IGluZm8ubmFtZSxcbiAgICBwcm9maWxlSm9iOiBpbmZvLmFib3V0XG4gIH0pO1xufVxuXG5mdW5jdGlvbiByZW5kZXJJbml0aWFsQ2FyZHMoaW5pdGlhbENhcmRzKSB7XG4gIGNhcmRzTGlzdCA9IG5ldyBTZWN0aW9uKHtcbiAgICBpdGVtczogaW5pdGlhbENhcmRzLnJldmVyc2UoKSxcbiAgICByZW5kZXJlcjogKGl0ZW0pID0+IHtcbiAgICAgIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChcbiAgICAgICAgaXRlbSxcbiAgICAgICAgdXNlckluZm8uZ2V0VXNlcklkKCksXG4gICAgICAgIHBvcHVwU2hvd0NhcmQub3Blbi5iaW5kKHBvcHVwU2hvd0NhcmQpLFxuICAgICAgICBwb3B1cENvbmZpcm0ub3Blbi5iaW5kKHBvcHVwQ29uZmlybSksXG4gICAgICAgIGhhbmRsZUJ1dHRvbkxpa2UsXG4gICAgICAgIHNlbGVjdG9yc1xuICAgICAgKTtcbiAgICAgIGNhcmRzTGlzdC5hZGRJdGVtKGNhcmQuY3JlYXRlTmV3Q2FyZCgpKTtcbiAgICB9XG4gIH0sIHNlbGVjdG9ycy5jYXJkTGlzdFNlbGVjdG9yKTtcbiAgY2FyZHNMaXN0LnJlbmRlckl0ZW1zKCk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZXJQcm9maWxlU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcG9wdXBFZGl0UHJvZmlsZS5zaG93TG9hZGluZygn0KHQvtGF0YDQsNC90LXQvdC40LUuLi4nKTtcbiAgYXBpLnBhdGNoVXNlckluZm8odGhpcy5pbnB1dFZhbHVlc09iailcbiAgICAudGhlbihyZW5kZXJVc2VySW5mbylcbiAgICAuY2F0Y2goZXJyID0+IGFsZXJ0KGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZS5jbG9zZSgpO1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZS5zaG93TG9hZGluZygn0KHQvtGF0YDQsNC90LjRgtGMJyk7XG4gICAgfSk7XG59XG5cbmZ1bmN0aW9uIGhhbmRsZXJBZGRDYXJkU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcG9wdXBBZGRDYXJkLnNob3dMb2FkaW5nKCfQodC+0LfQtNCw0L3QuNC1Li4uJyk7XG4gIGFwaS5wb3N0TmV3Q2FyZCh0aGlzLmlucHV0VmFsdWVzT2JqKVxuICAgIC50aGVuKCgpID0+IGFwaS5nZXRJbml0aWFsQ2FyZHMoKSlcbiAgICAudGhlbigoY2FyZHMpID0+IGNhcmRzTGlzdC51cGRhdGVTZWN0aW9uKGNhcmRzLnJldmVyc2UoKSkpXG4gICAgLmNhdGNoKGVyciA9PiBhbGVydChlcnIpKVxuICAgIC5maW5hbGx5KCgpID0+IHtcbiAgICAgIHBvcHVwQWRkQ2FyZC5jbG9zZSgpO1xuICAgICAgcG9wdXBBZGRDYXJkLnNob3dMb2FkaW5nKCfQodC+0LfQtNCw0YLRjCcpO1xuICAgIH0pO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVDb25maXJtU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcG9wdXBDb25maXJtLnNob3dMb2FkaW5nKCfQo9C00LDQu9C10L3QuNC1Li4uJyk7XG4gIGFwaS5kZWxldGVDYXJkKHBvcHVwQ29uZmlybS5nZXREYXRhVG9TZW5kKCkpXG4gICAgLnRoZW4oKCkgPT4gYXBpLmdldEluaXRpYWxDYXJkcygpKVxuICAgIC50aGVuKChjYXJkcykgPT4gY2FyZHNMaXN0LnVwZGF0ZVNlY3Rpb24oY2FyZHMucmV2ZXJzZSgpKSlcbiAgICAuY2F0Y2goZXJyID0+IGFsZXJ0KGVycikpXG4gICAgLmZpbmFsbHkoKCkgPT4ge1xuICAgICAgcG9wdXBDb25maXJtLmNsb3NlKCk7XG4gICAgICBwb3B1cENvbmZpcm0uc2hvd0xvYWRpbmcoJ9CU0LAnKTtcbiAgICB9KVxufVxuXG5mdW5jdGlvbiBoYW5kbGVCdXR0b25MaWtlKGNhcmRJZCwgaXNMaWtlZCkge1xuICBjb25zdCBwcm9taXNlID0gaXNMaWtlZCA/IGFwaS5kZWxldGVMaWtlKGNhcmRJZCkgOiBhcGkuYWRkTGlrZShjYXJkSWQpO1xuICBwcm9taXNlXG4gICAgLnRoZW4ocmVzID0+IHRoaXMuc2V0TGlrZXMocmVzLmxpa2VzKSlcbiAgICAuY2F0Y2goZXJyID0+IGFsZXJ0KGVycikpO1xufVxuXG5mdW5jdGlvbiBoYW5kbGVyQXZhdGFyU3VibWl0KGV2dCkge1xuICBldnQucHJldmVudERlZmF1bHQoKTtcbiAgcG9wdXBVcGRhdGVBdmF0YXIuc2hvd0xvYWRpbmcoJ9Ch0L7RhdGA0LDQvdC10L3QuNC1Li4uJyk7XG4gIGFwaS5wYXRjaFVzZXJBdmF0YXIodGhpcy5pbnB1dFZhbHVlc09iailcbiAgICAudGhlbihpbmZvID0+IHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoaW5mby5hdmF0YXIpKVxuICAgIC5jYXRjaChlcnIgPT4gYWxlcnQoZXJyKSlcbiAgICAuZmluYWxseSgoKSA9PiB7XG4gICAgICBwb3B1cFVwZGF0ZUF2YXRhci5jbG9zZSgpO1xuICAgICAgcG9wdXBVcGRhdGVBdmF0YXIuc2hvd0xvYWRpbmcoJ9Ch0L7RhdGA0LDQvdC40YLRjCcpO1xuICAgIH0pO1xufVxuXG5Qcm9taXNlLmFsbChbYXBpLmdldFVzZXJJbmZvKCksIGFwaS5nZXRJbml0aWFsQ2FyZHMoKV0pXG4gIC50aGVuKChbaW5mbywgaW5pdGlhbENhcmRzXSkgPT4ge1xuICAgIHJlbmRlclVzZXJJbmZvKGluZm8pO1xuICAgIHVzZXJJbmZvLnNldFVzZXJBdmF0YXIoaW5mby5hdmF0YXIpO1xuICAgIHVzZXJJbmZvLnNldFVzZXJJZChpbmZvLl9pZCk7XG4gICAgcmVuZGVySW5pdGlhbENhcmRzKGluaXRpYWxDYXJkcyk7XG5cbiAgICBjb25zdCBmb3JtVmFsaWRhdG9yc09iaiA9IHt9O1xuXG4gICAgZm9ybUxpc3QuZm9yRWFjaChmb3JtID0+IHtcbiAgICAgIGNvbnN0IGZvcm1WYWxpZGF0b3IgPSBuZXcgRm9ybVZhbGlkYXRvcihzZXR0aW5nc0Zvcm0sIGZvcm0pO1xuICAgICAgZm9ybVZhbGlkYXRvci5lbmFibGVWYWxpZGF0aW9uKCk7XG4gICAgICBmb3JtVmFsaWRhdG9yc09ialtmb3JtLm5hbWVdID0gZm9ybVZhbGlkYXRvcjtcbiAgICB9KTtcblxuICAgIGJ1dHRvbnMuZWRpdFByb2ZpbGVCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBwb3B1cEVkaXRQcm9maWxlLnNldElucHV0VmFsdWVzKHVzZXJJbmZvLmdldFVzZXJJbmZvKCkpO1xuICAgICAgZm9ybVZhbGlkYXRvcnNPYmouZm9ybUVkaXRQcm9maWxlLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgICAgcG9wdXBFZGl0UHJvZmlsZS5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBidXR0b25zLmFkZENhcmRCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBmb3JtVmFsaWRhdG9yc09iai5mb3JtQWRkQ2FyZC5yZXNldFZhbGlkYXRpb24oKTtcbiAgICAgIHBvcHVwQWRkQ2FyZC5vcGVuKCk7XG4gICAgfSk7XG5cbiAgICBidXR0b25zLmVkaXRBdmF0YXJCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XG4gICAgICBmb3JtVmFsaWRhdG9yc09iai5mb3JtVXBkQXZhdGFyLnJlc2V0VmFsaWRhdGlvbigpO1xuICAgICAgcG9wdXBVcGRhdGVBdmF0YXIub3BlbigpO1xuICAgIH0pO1xuICB9KVxuICAuY2F0Y2goZXJyID0+IGFsZXJ0KGVycikpO1xuIl0sIm5hbWVzIjpbIkNhcmQiLCJkYXRhIiwidXNlcklkIiwiaGFuZGxlQ2FyZENsaWNrIiwiaGFuZGxlQnV0dG9uUmVtb3ZlIiwiaGFuZGxlQnV0dG9uTGlrZSIsInRlbXBsYXRlU2VsZWN0b3IiLCJ0aGlzIiwiX25hbWUiLCJuYW1lIiwiX2xpbmsiLCJsaW5rIiwiX2NhcmRJZCIsIl9pZCIsIl9saWtlcyIsImxpa2VzIiwiX3VzZXJJZCIsIl9pc1JlbW92YWJsZSIsIm93bmVyIiwiX2hhbmRsZUNhcmRDbGljayIsIl9oYW5kbGVCdXR0b25SZW1vdmUiLCJfaGFuZGxlQnV0dG9uTGlrZSIsImJpbmQiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9pc0xpa2VkIiwibWFwIiwidXNlcnMiLCJpbmNsdWRlcyIsIl9idXR0b25MaWtlIiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiX2xpa2VDb3VudGVyIiwidGV4dENvbnRlbnQiLCJsZW5ndGgiLCJkb2N1bWVudCIsInF1ZXJ5U2VsZWN0b3IiLCJjb250ZW50IiwiZmlyc3RFbGVtZW50Q2hpbGQiLCJjbG9uZU5vZGUiLCJhZGRFdmVudExpc3RlbmVyIiwiX2J1dHRvblJlbW92ZSIsIl9jYXJkSW1hZ2UiLCJfdXBkYXRlTGlrZXMiLCJfbmV3Q2FyZCIsIl9nZXRUZW1wbGF0ZSIsInNyYyIsImFsdCIsIl9zZXRFdmVudExpc3RlbmVycyIsIkZvcm1WYWxpZGF0b3IiLCJzZXR0aW5nc0Zvcm0iLCJmb3JtIiwiX3NldHRpbmdzRm9ybSIsIl9mb3JtIiwiX2J1dHRvbkVsZW1lbnQiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbnB1dExpc3QiLCJBcnJheSIsImZyb20iLCJxdWVyeVNlbGVjdG9yQWxsIiwiaW5wdXRTZWxlY3RvciIsImV2dCIsInByZXZlbnREZWZhdWx0IiwiY2hlY2tWYWxpZGl0eSIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJyZW1vdmVBdHRyaWJ1dGUiLCJzZXRBdHRyaWJ1dGUiLCJpbnB1dEVsZW1lbnQiLCJfZXJyb3JFbGVtZW50IiwiaWQiLCJpbnB1dEVycm9yQ2xhc3MiLCJ2YWxpZGF0aW9uTWVzc2FnZSIsImVycm9yQ2xhc3MiLCJ2YWxpZGl0eSIsInZhbGlkIiwiX2hpZGVJbnB1dEVycm9yIiwiX3Nob3dJbnB1dEVycm9yIiwiZm9yRWFjaCIsIl9jaGVja0lucHV0VmFsaWRpdHkiLCJfdG9nZ2xlQnV0dG9uU3RhdGUiLCJfaGFuZGxlRm9ybVN1Ym1pdCIsIlNlY3Rpb24iLCJjb250YWluZXJTZWxlY3RvciIsIml0ZW1zIiwicmVuZGVyZXIiLCJfaXRlbXNBcnJheSIsIl9yZW5kZXJlciIsIl9jb250YWluZXIiLCJlbGVtZW50IiwicHJlcGVuZCIsIml0ZW0iLCJjYXJkcyIsImNoaWxkcmVuIiwicmVuZGVySXRlbXMiLCJQb3B1cCIsInBvcHVwU2VsZWN0b3IiLCJfcG9wdXAiLCJfYnV0dG9uQ2xvc2UiLCJfaGFuZGxlRXNjQ2xvc2UiLCJfaGFuZGxlT3ZlcmxheUNsb3NlIiwia2V5IiwiY2xvc2UiLCJ0YXJnZXQiLCJjb250YWlucyIsInJlbW92ZUV2ZW50TGlzdGVuZXIiLCJQb3B1cFdpdGhGb3JtIiwiaGFuZGxlckZvcm1TdWJtaXQiLCJfaGFuZGxlckZvcm1TdWJtaXQiLCJfYnV0dG9uU3VibWl0IiwiaW5wdXRWYWx1ZXNPYmoiLCJ0ZXh0IiwidmFsdWUiLCJpbnB1dFZhbHVlcyIsIl9nZXRJbnB1dFZhbHVlcyIsInJlc2V0IiwiUG9wdXBXaXRoSW1hZ2UiLCJfc2hvd0NhcmRJbWFnZSIsIl9zaG93Q2FyZENhcHRpb24iLCJQb3B1cFdpdGhDb25maXJtYXRpb24iLCJkYXRhVG9TZW5kIiwiX2RhdGFUb1NlbmQiLCJVc2VySW5mbyIsInVzZXJOYW1lU2VsZWN0b3IiLCJ1c2VySm9iU2VsZWN0b3IiLCJ1c2VyQXZhdGFyU2VsZWN0b3IiLCJfdXNlck5hbWUiLCJfdXNlckpvYiIsIl91c2VyQXZhdGFyIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwiQXBpIiwiY29uZmlnIiwiX2Jhc2VVcmwiLCJiYXNlVXJsIiwiX2hlYWRlcnMiLCJoZWFkZXJzIiwicmVzIiwib2siLCJqc29uIiwiUHJvbWlzZSIsInJlamVjdCIsInN0YXR1cyIsImZldGNoIiwidGhlbiIsIl9jaGVja1Jlc3BvbnNlIiwibWV0aG9kIiwiYm9keSIsIkpTT04iLCJzdHJpbmdpZnkiLCJhYm91dCIsImF2YXRhckxpbmsiLCJhdmF0YXIiLCJjYXJkTmFtZSIsImNhcmRMaW5rIiwiY2FyZElkIiwic2VsZWN0b3JzIiwiY2FyZExpc3RTZWxlY3RvciIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cFVwZGF0ZUF2YXRhciIsInBvcHVwQWRkQ2FyZCIsInBvcHVwU2hvd0NhcmQiLCJwb3B1cENvbmZpcm0iLCJidXR0b25zIiwiZWRpdFByb2ZpbGVCdXR0b24iLCJhZGRDYXJkQnV0dG9uIiwiZWRpdEF2YXRhckJ1dHRvbiIsImZvcm1MaXN0IiwiZm9ybXMiLCJjYXJkc0xpc3QiLCJhcGkiLCJhdXRob3JpemF0aW9uIiwic2hvd0xvYWRpbmciLCJwYXRjaFVzZXJJbmZvIiwicmVuZGVyVXNlckluZm8iLCJjYXRjaCIsImVyciIsImFsZXJ0IiwiZmluYWxseSIsInNldEV2ZW50TGlzdGVuZXJzIiwicG9zdE5ld0NhcmQiLCJnZXRJbml0aWFsQ2FyZHMiLCJ1cGRhdGVTZWN0aW9uIiwicmV2ZXJzZSIsInBhdGNoVXNlckF2YXRhciIsImluZm8iLCJ1c2VySW5mbyIsInNldFVzZXJBdmF0YXIiLCJkZWxldGVDYXJkIiwiZ2V0RGF0YVRvU2VuZCIsInNldFVzZXJJbmZvIiwiaXNMaWtlZCIsImRlbGV0ZUxpa2UiLCJhZGRMaWtlIiwic2V0TGlrZXMiLCJhbGwiLCJnZXRVc2VySW5mbyIsImluaXRpYWxDYXJkcyIsInNldFVzZXJJZCIsImNhcmQiLCJnZXRVc2VySWQiLCJvcGVuIiwiYWRkSXRlbSIsImNyZWF0ZU5ld0NhcmQiLCJyZW5kZXJJbml0aWFsQ2FyZHMiLCJmb3JtVmFsaWRhdG9yc09iaiIsImZvcm1WYWxpZGF0b3IiLCJlbmFibGVWYWxpZGF0aW9uIiwic2V0SW5wdXRWYWx1ZXMiLCJmb3JtRWRpdFByb2ZpbGUiLCJyZXNldFZhbGlkYXRpb24iLCJmb3JtQWRkQ2FyZCIsImZvcm1VcGRBdmF0YXIiXSwic291cmNlUm9vdCI6IiJ9